<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pertumbuhan & Peluruhan — EulerMath</title>

<!-- ICON -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<!-- BOOTSTRAP -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"/>

<!-- MATHJAX -->
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- CHART -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
    --primary:#0284c7;
    --primary-light:#38bdf8;
    --bg-gradient:linear-gradient(135deg,#0ea5e9,#06b6d4);
}
body{
    background:#f1f5f9;
    font-family:'Segoe UI';
}

/* Navbar */
.nav-link{
    color:#475569;
    font-weight:600;
}
.nav-link:hover, .nav-link.active{
    color:var(--primary)!important;
}

/* Cards */
.card{
    border:none;
    border-radius:14px;
    box-shadow:0 4px 12px rgba(0,0,0,.06);
    animation:fade .3s ease;
}

/* Formula Box */
.formula-box{
    background:#e0f2fe;
    border-left:5px solid var(--primary);
    padding:1rem;
    border-radius:10px;
    font-size:1.2rem;
}

/* Result */
.result-box{
    background:white;
    padding:1rem;
    border-radius:10px;
    border-left:5px solid var(--primary);
    box-shadow:0 2px 6px rgba(0,0,0,.08);
    animation:fade .4s ease;
}

/* Explanation Bubble */
.info-bubble{
    background:#fff7ed;
    padding:1rem;
    border-radius:10px;
    border-left:5px solid #fb923c;
    font-size:0.95rem;
    margin-top:1rem;
    box-shadow:0 2px 4px rgba(0,0,0,.05);
}

/* Fade animation */
@keyframes fade{
    from{opacity:0; transform:translateY(10px);}
    to{opacity:1; transform:translateY(0);}
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="p-4 text-center text-white" style="background:var(--bg-gradient)">
    <div class="container">
        <span class="fw-bold fs-3"><i class="fas fa-seedling me-2"></i>Pertumbuhan & Peluruhan Eksponensial</span>
        <p class="text-white-50 m-0">Kalkulator Interaktif • Grafik • Penjelasan Otomatis</p>
    </div>
</div>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg bg-white shadow-sm">
 <div class="container">
  <div class="collapse navbar-collapse justify-content-center">
      <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link me-3" href="index.html">Beranda</a></li>
          <li class="nav-item"><a class="nav-link me-3" href="lognatural.html">Logaritma Natural</a></li>
          <li class="nav-item"><a class="nav-link me-3" href="invers.html">Fungsi Invers</a></li>
          <li class="nav-item"><a class="nav-link me-3" href="eksponennatural.html">Eksponen Alami</a></li>
          <li class="nav-item"><a class="nav-link me-3" href="eksplog.html">Eksponen & Log Umum</a></li>
          <li class="nav-item"><a class="nav-link active me-3" href="#">Pertumbuhan & Peluruhan</a></li>
      </ul>
  </div>
 </div>
</nav>

<main class="container my-4">

<div class="card p-4">

<h2 class="fw-bold">Kalkulator Model Eksponensial</h2>
<p class="text-muted">Isi tiga nilai, biarkan satu kosong—otomatis dihitung, lengkap dengan grafik dan penjelasan.</p>

<div class="formula-box mb-4">
\[
y = y_0 e^{kt}
\]
</div>

<!-- ===================== FORM ===================== -->
<div class="row g-3">
    <div class="col-md-3">
        <label class="form-label fw-semibold">y (nilai akhir)</label>
        <input type="number" step="0.0001" id="y" class="form-control" placeholder="Kosongkan jika dicari">
    </div>
    <div class="col-md-3">
        <label class="form-label fw-semibold">y₀ (nilai awal)</label>
        <input type="number" step="0.0001" id="y0" class="form-control" placeholder="Kosongkan jika dicari">
    </div>
    <div class="col-md-3">
        <label class="form-label fw-semibold">k (konstanta)</label>
        <input type="number" step="0.0001" id="k" class="form-control" placeholder="Kosongkan jika dicari">
    </div>
    <div class="col-md-3">
        <label class="form-label fw-semibold">t (waktu)</label>
        <input type="number" step="0.0001" id="t" class="form-control" placeholder="Kosongkan jika dicari">
    </div>
</div>

<button class="btn btn-primary mt-4 px-4" onclick="hitung()">
    <i class="fas fa-calculator me-2"></i>Hitung
</button>

<div id="output"></div>

<!-- GRAFIK -->
<div class="mt-4">
    <canvas id="chart" height="120"></canvas>
</div>

</div>
</main>

<!-- ===================== SCRIPT ===================== -->
<script>
let chart = null;

function hitung(){
    let y  = document.getElementById("y").value;
    let y0 = document.getElementById("y0").value;
    let k  = document.getElementById("k").value;
    let t  = document.getElementById("t").value;

    let kosong = [y==="", y0==="", k==="", t===""].filter(v=>v).length;
    if(kosong !== 1){
        document.getElementById("output").innerHTML =
        `<div class='alert alert-danger mt-3'>Isi <b>tiga</b> nilai dan kosongkan hanya satu.</div>`;
        return;
    }

    y  = y  !== "" ? parseFloat(y)  : null;
    y0 = y0 !== "" ? parseFloat(y0) : null;
    k  = k  !== "" ? parseFloat(k)  : null;
    t  = t  !== "" ? parseFloat(t)  : null;

    let steps = "", result = "", info = "";

    /* ========================== HITUNG Y ========================== */
    if(y === null){
        let yVal = y0 * Math.exp(k*t);
        result = `y = ${yVal.toFixed(5)}`;

        info = `
            Nilai <b>y</b> menunjukkan jumlah akhir setelah waktu <b>t</b>.
            Karena k = ${k}, model menunjukkan bahwa proses ini mengalami
            <b>${k > 0 ? "pertumbuhan" : "peluruhan"}</b>.
        `;

        steps = `
        \\[
        y = y_0 e^{kt}
        \\]
        \\[
        y = ${y0} e^{(${k})(${t})}
        \\]
        \\[
        y = ${yVal.toFixed(5)}
        \\]
        `;
    }

    /* ========================== HITUNG y0 ========================== */
    else if(y0 === null){
        let y0Val = y / Math.exp(k*t);
        result = `y₀ = ${y0Val.toFixed(5)}`;
        info = `Nilai <b>y₀</b> adalah kondisi awal sebelum berubah mengikuti model eksponensial.`;

        steps = `
        \\[
        y_0 = \\frac{y}{e^{kt}}
        \\]
        \\[
        y_0 = \\frac{${y}}{e^{(${k})(${t})}}
        \\]
        \\[
        y_0 = ${y0Val.toFixed(5)}
        \\]
        `;
    }

    /* ========================== HITUNG k ========================== */
    else if(k === null){
        let ratio = y / y0;
        let kVal = Math.log(ratio)/t;

        result = `k = ${kVal.toFixed(5)}`;
        info = `
            Nilai <b>k</b> menentukan apakah proses berupa
            <span class="text-success fw-bold">pertumbuhan (k > 0)</span>
            atau
            <span class="text-danger fw-bold">peluruhan (k < 0)</span>.
        `;

        steps = `
        \\[
        k = \\frac{\\ln(y/y_0)}{t}
        \\]
        \\[
        k = \\frac{\\ln(${y}/${y0})}{${t}}
        \\]
        \\[
        k = ${kVal.toFixed(5)}
        \\]
        `;
        k = kVal;
    }

    /* ========================== HITUNG t ========================== */
    else if(t === null){
        let ratio = y / y0;
        let tVal = Math.log(ratio)/k;

        result = `t = ${tVal.toFixed(5)}`;
        info = `
            Nilai <b>t</b> menunjukkan waktu yang dibutuhkan agar nilai awal berubah
            menjadi nilai akhir mengikuti model eksponensial.
        `;

        steps = `
        \\[
        t = \\frac{\\ln(y/y_0)}{k}
        \\]
        \\[
        t = ${tVal.toFixed(5)}
        \\]
        `;
        t = tVal;
    }

    /* ========================== TAMPILKAN ========================== */
    document.getElementById("output").innerHTML = `
        <div class="result-box">
            <h5 class="fw-bold mb-2">Hasil Perhitungan</h5>
            <p>${result}</p>
            <hr>
            <b>Langkah-langkah:</b>
            <div>${steps}</div>
            <div class="info-bubble mt-3">${info}</div>
        </div>
    `;

    MathJax.typeset();

    /* ========================== GRAFIK ========================== */
    if(chart) chart.destroy();

    let labels = [], values = [];
    for(let i=0; i<=10; i++){
        let tx = (t ?? 5) * (i/10);
        let yx = y0 * Math.exp(k * tx);
        labels.push(tx.toFixed(2));
        values.push(yx);
    }

    let ctx = document.getElementById("chart");
    chart = new Chart(ctx,{
        type:"line",
        data:{
            labels: labels,
            datasets:[{
                label:"y(t)",
                data: values,
                tension:.3,
                borderWidth:3,
                borderColor:"#0284c7",
                fill:false
            }]
        },
        options:{
            plugins:{legend:{display:false}},
            scales:{y:{beginAtZero:false}}
        }
    });
}
</script>

</body>
</html>
